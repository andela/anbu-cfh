</script>
<div id="app-container" style="margin: 0 auto" ng-controller="GameController">
  <div class="mdl-layout__header mdl-layout__header--scroll">
    <div class="mdl-layout__header-row"><span class="cfh-title mdl-layout-title" style="font-family: Montserrat">Cards For Humanity</span>
      <!-- Add spacer, to align navigation to the right in desktop-->
      <div class="cfh-header-spacer mdl-layout-spacer"></div>
      <!-- Navigation-->
      <div class="cfh-navigation-container">
        <nav class="cfh-navigation mdl-navigation">
          <div>
           <a id="invite-friends-button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
        Invite Players
        </a>
         <a id='game-history-button' ng-click="gameLog()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
        Game History
        </a>
        </div>
        <div>
          <a id='abandon-game-button' ng-click="abandonGame()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
        Abandon Game
        </a>
        </div>
        </nav>
      </div>
      <span class="android-mobile-title mdl-layout-title text-logo-mobile"></span>
    </div>
  </div>


  <div class="game mdl-grid">

    <div class="mdl-cell mdl-cell--9-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
      <div class="mdl-grid">
        <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-tablet time-remaining mdl-card mdl-shadow--4dp">
          <timer></timer>
        </div>

        <div class="mdl-cell mdl-cell--9-col mdl-cell--12-col-tablet question-box mdl-card mdl-shadow--4dp">
          <question></question>
        </div>

        <div class="mdl-cell mdl-cell--12-col answer-box">
          <div class="mdl-card mdl-shadow--4dp game-cards card-for-game">
            <answers></answers>
          </div>
        </div>
      </div>
    </div>

    <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-tablet mdl-cell--12-col-phone players">
      <player></player>
    </div>

  </div>
  <chat></chat>
  <!--Dialog Displaying Search and Invite Users-->
  <dialog class="mdl-dialog" id="searchModal">
      <h4 class="mdl-dialog__title">Search and Invite Players</h4>
      <div class="mdl-dialog__content">
        <div>
        <form>
            <div class="mdl-textfield mdl-js-textfield">
              <input type="text" class="mdl-textfield__input" id="search-query"
                placeholder="Search users..." ng-model="searchString"
                ng-change="searchDB(searchString)" autocomplete=off>
            </div>
          </form>
          </div>
          <div id="search-result">

            <table class="mdl-data-table mdl-js-data-table">
              <tbody>
                <tr ng-repeat="i in items">
                  <td>{{i.name}} </td>
                  <td ng-if="checkPlayer(i.email)" title="{{i.email}}">
                    <button ng-click="sendInvite(i.email, i.name)" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
                      Send Invite
                    </button>
                  </td>
                  <td ng-if="!checkPlayer(i.email)">
                    <button ng-disabled="true" class="mdl-button mdl-js-button mdl-button--raised">
                      User invited
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
      </div>
      <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button close">Close</button>
      </div>
    </dialog>
    <!--Dialog for Minimum Players-->
    <dialog class ="mdl-dialog" id="minAlertModal">
      <h4 class="mdl-dialog__title" style="text-align:center">Alert message</h4>
      <div class="mdl-dialog__content">
        <p style="text-align:center">A minimum of three players are required to start the game</p>
      </div>

      <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button close">Close</button>
      </div>

    </dialog>
    <!--Dialog for Maximum Players-->
    <dialog class ="mdl-dialog" id="maxAlertModal">
      <h4 class="mdl-dialog__title" style="text-align:center">Alert message</h4>
      <div class="mdl-dialog__content">
        <p style="text-align:center">You have exceeded the maximum allowed no of invites</p>
      </div>

      <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button close">Close</button>
      </div>

    </dialog>
<!--Dialog Showing Game History-->
<dialog class="mdl-dialog" id="gameHistoryModal">
  <h6 class="mdl-dialog__title" style="text-align:center">Game History</h6>
  <div class="mdl-dialog__content">
    <div ng-show="gamelogshow" class="table-responsive">
      <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
        <thead>
          <tr>
            <th class="mdl-data-table__cell--non-numeric">
              GAME TIME
            </th>
            <th class="mdl-data-table__cell--non-numeric">
              FRIENDS PLAYED
            </th>
            <th class="mdl-data-table__cell--non-numeric">
              NO. OF ROUNDS
            </th>
            <th class="mdl-data-table__cell--non-numeric">
              WINNER
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="toDisplay in allGames">
            <td class="mdl-data-table__cell--non-numeric">
              {{toDisplay.gamedate}}
            </td>
            <td class="mdl-data-table__cell--non-numeric">
              <a ng-click="displayfriends = !displayfriends">
                  {{toDisplay.players.length}} players...
                </a>
              <table ng-show='displayfriends'>
                <tr ng-repeat="name in toDisplay.players">
                  <td class="mdl-data-table__cell--non-numeric">
                    {{name}}
                  </td>
                </tr>
              </table>
            </td>
            <td class="mdl-data-table__cell--non-numeric">
              {{toDisplay.rounds}}
            </td>
            <td class="mdl-data-table__cell--non-numeric">
              {{toDisplay.winner}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button close">Close</button>
  </div>
</dialog>
  <div ng-include='"./views/gamelog.html"'></div>
</div>
